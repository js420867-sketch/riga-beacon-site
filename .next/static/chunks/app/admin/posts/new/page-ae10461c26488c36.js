(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[629],{76:function(e,t,a){Promise.resolve().then(a.bind(a,9313))},9313:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(7437),l=a(2265),n=a(6634),r=a(9376);function u(){let[e,t]=(0,l.useState)(""),[a,u]=(0,l.useState)(""),[o,i]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),[p,h]=(0,l.useState)("draft"),[m,f]=(0,l.useState)(null),v=(0,r.useRouter)(),x=async t=>{t.preventDefault();let s=null;if(m){let e="posts/".concat(Date.now(),"_").concat(m.name),{data:t,error:a}=await n.O.storage.from("media").upload(e,m);a||(s=n.O.storage.from("media").getPublicUrl(e).data.publicUrl)}let{data:l,error:r}=await n.O.from("posts").insert({title:e,slug:a,excerpt:o,content:{html:c},status:p,cover_url:s}).select("id").single();!r&&l&&v.push("/admin/posts/".concat(l.id))};return(0,s.jsxs)("div",{className:"max-w-2xl",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Jauns raksts"}),(0,s.jsxs)("form",{onSubmit:x,className:"space-y-3",children:[(0,s.jsx)("input",{className:"border p-2 w-full",placeholder:"Nosaukums",value:e,onChange:e=>t(e.target.value)}),(0,s.jsx)("input",{className:"border p-2 w-full",placeholder:"Slugs",value:a,onChange:e=>u(e.target.value)}),(0,s.jsx)("textarea",{className:"border p-2 w-full",placeholder:"Kopsavilkums",value:o,onChange:e=>i(e.target.value)}),(0,s.jsx)("textarea",{className:"border p-2 w-full min-h-[200px]",placeholder:"Saturs (HTML vai teksts)",value:c,onChange:e=>d(e.target.value)}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("input",{type:"file",onChange:e=>{var t;return f((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),(0,s.jsxs)("select",{value:p,onChange:e=>h(e.target.value),className:"border p-2",children:[(0,s.jsx)("option",{value:"draft",children:"Melnraksts"}),(0,s.jsx)("option",{value:"published",children:"Publicēts"})]})]}),(0,s.jsx)("button",{className:"bg-black text-white px-4 py-2",children:"Saglabāt"})]})]})}},6634:function(e,t,a){"use strict";a.d(t,{O:function(){return n}});var s=a(3053),l=a(257);let n=(0,s.eI)(l.env.NEXT_PUBLIC_SUPABASE_URL,l.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},function(e){e.O(0,[383,971,117,744],function(){return e(e.s=76)}),_N_E=e.O()}]);