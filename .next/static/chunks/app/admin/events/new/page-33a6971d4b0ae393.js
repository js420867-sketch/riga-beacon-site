(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28],{8937:function(e,a,t){Promise.resolve().then(t.bind(t,4288))},4288:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return r}});var l=t(7437),s=t(2265),n=t(6634),u=t(9376);function r(){let[e,a]=(0,s.useState)(""),[t,r]=(0,s.useState)(""),[i,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[p,m]=(0,s.useState)(""),[h,v]=(0,s.useState)(""),[g,f]=(0,s.useState)(""),[x,b]=(0,s.useState)(""),[N,j]=(0,s.useState)(""),[S,w]=(0,s.useState)("draft"),[C,_]=(0,s.useState)(null),k=(0,u.useRouter)(),E=async a=>{a.preventDefault();let l=null;if(C){let e="events/".concat(Date.now(),"_").concat(C.name),{error:a}=await n.O.storage.from("media").upload(e,C);a||(l=n.O.storage.from("media").getPublicUrl(e).data.publicUrl)}let{data:s,error:u}=await n.O.from("events").insert({title:e,slug:t,description:{html:i},start_at:c,end_at:p,venue:h,age_group:g,category:x,tags:N,status:S,cover_url:l}).select("id").single();!u&&s&&k.push("/admin/events/".concat(s.id))};return(0,l.jsxs)("div",{className:"max-w-2xl",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Jauns pasākums"}),(0,l.jsxs)("form",{onSubmit:E,className:"space-y-3",children:[(0,l.jsx)("input",{className:"border p-2 w-full",placeholder:"Nosaukums",value:e,onChange:e=>a(e.target.value)}),(0,l.jsx)("input",{className:"border p-2 w-full",placeholder:"Slugs",value:t,onChange:e=>r(e.target.value)}),(0,l.jsx)("textarea",{className:"border p-2 w-full min-h-[160px]",placeholder:"Apraksts",value:i,onChange:e=>o(e.target.value)}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,l.jsx)("input",{type:"datetime-local",className:"border p-2 w-full",value:c,onChange:e=>d(e.target.value)}),(0,l.jsx)("input",{type:"datetime-local",className:"border p-2 w-full",value:p,onChange:e=>m(e.target.value)})]}),(0,l.jsx)("input",{className:"border p-2 w-full",placeholder:"Vieta",value:h,onChange:e=>v(e.target.value)}),(0,l.jsx)("input",{className:"border p-2 w-full",placeholder:"Vecuma grupa",value:g,onChange:e=>f(e.target.value)}),(0,l.jsx)("input",{className:"border p-2 w-full",placeholder:"Kategorija",value:x,onChange:e=>b(e.target.value)}),(0,l.jsx)("input",{className:"border p-2 w-full",placeholder:"Birkas (komatiem)",value:N,onChange:e=>j(e.target.value)}),(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)("input",{type:"file",onChange:e=>{var a;return _((null===(a=e.target.files)||void 0===a?void 0:a[0])||null)}}),(0,l.jsxs)("select",{value:S,onChange:e=>w(e.target.value),className:"border p-2",children:[(0,l.jsx)("option",{value:"draft",children:"Melnraksts"}),(0,l.jsx)("option",{value:"published",children:"Publicēts"})]})]}),(0,l.jsx)("button",{className:"bg-black text-white px-4 py-2",children:"Saglabāt"})]})]})}},6634:function(e,a,t){"use strict";t.d(a,{O:function(){return n}});var l=t(3053),s=t(257);let n=(0,l.eI)(s.env.NEXT_PUBLIC_SUPABASE_URL,s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},function(e){e.O(0,[383,971,117,744],function(){return e(e.s=8937)}),_N_E=e.O()}]);