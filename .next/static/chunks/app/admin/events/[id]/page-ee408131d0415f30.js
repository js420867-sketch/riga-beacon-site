(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[699],{7519:function(e,a,t){Promise.resolve().then(t.bind(t,2514))},2514:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return r}});var l=t(7437),s=t(2265),u=t(6634),n=t(9376);function r(){let{id:e}=(0,n.useParams)(),a=(0,n.useRouter)(),[t,r]=(0,s.useState)(!0),[i,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[p,v]=(0,s.useState)(""),[m,g]=(0,s.useState)(""),[h,f]=(0,s.useState)(""),[x,N]=(0,s.useState)(""),[b,j]=(0,s.useState)(""),[S,_]=(0,s.useState)(""),[w,C]=(0,s.useState)(""),[k,E]=(0,s.useState)("draft"),[y,O]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{let{data:a}=await u.O.from("events").select("*").eq("id",e).single();if(a){var t;o(a.title||""),d(a.slug||""),v((null===(t=a.description)||void 0===t?void 0:t.html)||""),g(a.start_at?a.start_at.slice(0,16):""),f(a.end_at?a.end_at.slice(0,16):""),N(a.venue||""),j(a.age_group||""),_(a.category||""),C(a.tags||""),E(a.status||"draft")}r(!1)})()},[e]);let P=async t=>{let l;if(t.preventDefault(),y){let e="events/".concat(Date.now(),"_").concat(y.name),{error:a}=await u.O.storage.from("media").upload(e,y);a||(l=u.O.storage.from("media").getPublicUrl(e).data.publicUrl)}await u.O.from("events").update({title:i,slug:c,description:{html:p},start_at:m,end_at:h,venue:x,age_group:b,category:S,tags:w,status:k,...l?{cover_url:l}:{}}).eq("id",e),a.push("/admin/events")};return t?(0,l.jsx)("div",{children:"Notiek ielāde…"}):(0,l.jsxs)("div",{className:"max-w-2xl",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Rediģēt pasākumu"}),(0,l.jsxs)("form",{onSubmit:P,className:"space-y-3",children:[(0,l.jsx)("input",{className:"border p-2 w-full",placeholder:"Nosaukums",value:i,onChange:e=>o(e.target.value)}),(0,l.jsx)("input",{className:"border p-2 w-full",placeholder:"Slugs",value:c,onChange:e=>d(e.target.value)}),(0,l.jsx)("textarea",{className:"border p-2 w-full min-h-[160px]",placeholder:"Apraksts",value:p,onChange:e=>v(e.target.value)}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,l.jsx)("input",{type:"datetime-local",className:"border p-2 w-full",value:m,onChange:e=>g(e.target.value)}),(0,l.jsx)("input",{type:"datetime-local",className:"border p-2 w-full",value:h,onChange:e=>f(e.target.value)})]}),(0,l.jsx)("input",{className:"border p-2 w-full",placeholder:"Vieta",value:x,onChange:e=>N(e.target.value)}),(0,l.jsx)("input",{className:"border p-2 w-full",placeholder:"Vecuma grupa",value:b,onChange:e=>j(e.target.value)}),(0,l.jsx)("input",{className:"border p-2 w-full",placeholder:"Kategorija",value:S,onChange:e=>_(e.target.value)}),(0,l.jsx)("input",{className:"border p-2 w-full",placeholder:"Birkas (komatiem)",value:w,onChange:e=>C(e.target.value)}),(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)("input",{type:"file",onChange:e=>{var a;return O((null===(a=e.target.files)||void 0===a?void 0:a[0])||null)}}),(0,l.jsxs)("select",{value:k,onChange:e=>E(e.target.value),className:"border p-2",children:[(0,l.jsx)("option",{value:"draft",children:"Melnraksts"}),(0,l.jsx)("option",{value:"published",children:"Publicēts"})]})]}),(0,l.jsx)("button",{className:"bg-black text-white px-4 py-2",children:"Saglabāt"})]})]})}},6634:function(e,a,t){"use strict";t.d(a,{O:function(){return u}});var l=t(3053),s=t(257);let u=(0,l.eI)(s.env.NEXT_PUBLIC_SUPABASE_URL,s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)}},function(e){e.O(0,[383,971,117,744],function(){return e(e.s=7519)}),_N_E=e.O()}]);